<!--   

-->
<div id="varb-storage" data-time-started="{{time_started}}" data-samp-time="{{samp_time_ball}}" data-is-running="{{isRunning}}"
 data-time-stopped="{{time_stopped}}" data-speed-fact="{{speed_up_fact}}">
</div>

<br/>

<div id="varb-in" data-tim-int={{commTimeInt}}></div>
<div class="row">
	<div class="col-md-3">
		<div class="row">
			<div class="panel panel-primary">
				<div class="panel-heading">Time Started</div>
				<div class="panel-body">
					<!--
					<input style="width: 90%; margin: 5px 0px 5px 0px;" type="password" name="user_password" id="user_password" placeholder="time started">
					-->
					<h4 id="time_started">{{time_started}}</h4>
				</div>
			</div>
		</div>
	</div>
	<div class="col-md-1">
	</div>
	<div class="col-md-3">
		<div class="row">
			<div class="panel panel-primary">
				<div class="panel-heading">Time Stopped</div>
				<div class="panel-body">
					<!--
					<input style="width: 90%; margin: 5px 0px 5px 0px;" type="password" name="user_password" id="user_password" placeholder="time started">
					-->
					<h4 id="time_started">{{time_stopped}}</h4>
				</div>
			</div>
		</div>
	</div>
	<div class="col-md-1">
	</div>
	<div class="col-md-3">
		<div class="row">
			<div class="panel panel-primary">
				<div class="panel-heading">Time Elapsed</div>
				<div class="panel-body">
					<!--
					<input style="width: 90%; margin: 5px 0px 5px 0px;" type="password" name="user_password" id="user_password" placeholder="time started">
					-->
					<h4 id="time_elapsed">{{time_elapsed}}</h4>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="col-md-3">
	<div class="row">
		<div class="panel panel-primary">
			<div class="panel-heading">Status</div>
			<div class="panel-body">
				<h4 id="is_started">{{isRunning}} </h4>
			</div>
		</div>
	</div>
</div>


<div class="row">
	<div class="col-md-1">
	</div>
	<div class="col-md-3">
		<div class="row">
			<div class="col-md-6">
				<div class="panel panel-primary">
					<div class="panel-heading">Ball upd tim</div>
					<div class="panel-body">
						<input style="width: 90%; margin: 5px 0px 5px 0px;" type="text" name="ball_samp_time" id="ball_samp_time" placeholder="ball samp time">
						<!--
					<h4 id="ball_samp_time"></h4>
					-->
					</div>
				</div>
			</div>
			<div class="col-md-6">
				<div class="panel panel-primary">
					<div class="panel-heading">sql upd tim</div>
					<div class="panel-body">
						<input style="width: 90%; margin: 5px 0px 5px 0px;" type="text" name="sql_upd_time" id="sql_upd_time" placeholder="sql upd time">
						<!--
					<h4 id="ball_samp_time"></h4>
					-->
					</div>
				</div>
			</div>
			<div class="col-md-6">
				<div class="panel panel-primary">
					<div class="panel-heading">Speed Up Fact</div>
					<div class="panel-body">
						<input style="width: 90%; margin: 5px 0px 5px 0px;" type="text" name="spd_up_fact" id="spd_up_fact" placeholder="speed up fact">
						<!--
					<h4 id="ball_samp_time"></h4>
					-->
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="row">
	<h4>Real Time Ball Position</h4>
</div>


<div class="col-md-12">
	<div class="row">
	</div>
	<div class="row">
		{{!--
		<br/> --}}
	</div>
	<div class="row">
		<button class='jumbotron btn btn-success btn-lg' style="font-size: 20px" id="btn-start">Start Engine</button>
		<button class='jumbotron btn btn-danger btn-lg' style="font-size: 20px;" id="btn-stop">Stop Engine</button>
		<button class='jumbotron btn btn-info btn-lg' style="font-size: 20px;" id="btn-start-game">Start Game</button>
		<button class='jumbotron btn btn-warning btn-lg' style="font-size: 20px;" id="btn-start-demo">Start Demo</button>
	</div>
</div>
<div class="col-md-1">
</div>

<div class="row">
	<div class="col-md-12">
		<button class='jumbotron btn btn-warning' style="font-size: 20px" style="float: left;" id="btn-hit-1">Hit #1</button>
		<button class='jumbotron btn btn-warning' style="font-size: 20px" style="float: left;" id="btn-hit-2">Hit #2</button>
		<button class='jumbotron btn btn-info' style="font-size: 20px" style="float: left;" id="btn-serve-1">Serve #1</button>
		<button class='jumbotron btn btn-info' style="font-size: 20px" style="float: left;" id="btn-serve-2">Serve #2</button>
	</div>
</div>
<br/>


<div class="row">
	<!-- split remaining column into 2 -->
	<div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">
		<input style="width: 90%; margin: 5px 0px 5px 0px;" type="text" name="play-1-addr" id="play-1-addr" placeholder="player 1 address">
	</div>
	<div class="col-xl-1 col-lg-1 col-md-2 col-sm-2 col-xs-2">
		<button class='btn-large btn-warning' style="float: right; margin: 5px;" id="btn-addr-1">send</button>
	</div>
</div>

<div class="row">
	<!-- split remaining column into 2 -->
	<div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">
		<input style="width: 90%; margin: 5px 0px 5px 0px;" type="text" name="play-2-addr" id="play-2-addr" placeholder="player 2 address">
	</div>
	<div class="col-xl-1 col-lg-1 col-md-2 col-sm-2 col-xs-2">
		<button class='btn-large btn-warning' style="float: right; margin: 5px;" id="btn-addr-2">send</button>
	</div>
</div>


<br/>
<br/>
<br/>


<p class="clear">
	{{logged_in}} | {{{ body }}}

	<script>
		var snap;
		var snapAfter;
		var myBlob;
		var formData;

		var take_photo_btn;
		var image;
		var video;
		var submitButton;
		var submitClick;
		var hidden_canvas;

		var cameraStillTaken = false;
		var autoPictSendInProg = false;
		var timeInterval;     	//time interval for pics
		var myIntervalTimer;  	//handle to interval timer
		//var myCommStatTimer; 	//timer for the comm status
		var commStatTimerInt = 3; 	//interval 
		var commStopAuto; //stop the auto pics

		var global_User_Id;
		var global_Device_Id;
		var global_Email_Id;
		var sendObj = {
			ball_samp_time: 0.00,
			speed_up_fact: 0.00,
			start_button: 0,
			stop_button: 0,
			isDemoMode: 0,
			hit_01: 0,
			hit_02: 0,
			place_ball_1: 0,
			place_ball_2: 0
		};
		var sendObj2 = {
			ball_samp_time: 0.00,
			speed_up_fact: 0.00,
			game_id: 0,
			play_num: 0,
			isAddrChange: false,
			addrString: "",
			isGeoChange: false,
			geo_loc: {
				lat: 0.0,
				lon: 0.0
			}
		};



		//$(document.body).on("load", ".img-item", sendClick);
		var sendPost = function () {
			$.post("/physics/button",
				sendObj,
				function (data, status) {
					if (data.errCode === 0) {
						//there is no error
						window.location.href = "/physics"
					} else {
						//what to do with error ?
					};
				});
		};

		//sends an address / game-change to the physics enginer
		var sendPostAddr = function () {
			$.post("/physics/game-change",
				sendObj2,
				function (data, status) {
					if (data.errCode === 0) {
						//there is no error
						//window.location.href = "/physics"
					} else {
						//what to do with error ?
					};
				});
		};


		//sends a "hit" to the physics enginer
		var sendPostHit = function () {
			$.post("/physics/button/hit",
				sendObj,
				function (data, status) {
					if (data.errCode === 0) {
						//there is no error
						//window.location.href = "/physics"
					} else {
						//what to do with error ?
					};
				});
		};

		//sends a "hit" to the physics enginer
		var sendPostServe = function () {
			$.post("/physics/button/serve",
				sendObj,
				function (data, status) {
					if (data.errCode === 0) {
						//there is no error
						//window.location.href = "/physics"
					} else {
						//what to do with error ?
					};
				});
		};

		var sendPostGame = function () {
			$.post("/physics/start/1",
				sendObj,
				function (data, status) {
					if (data.errCode === 0) {
						//there is no error
						window.location.href = "/physics"
					} else {
						//what to do with error ?
					};
				});

		};



		$(document).ready(function () {
			var timeVal = $('#varb-storage').attr("data-samp-time");
			var speedUpFact = $('#varb-storage').attr("data-speed-fact");

			$('#ball_samp_time').val(timeVal);
			$('#spd_up_fact').val(speedUpFact);
			$(document.body).on("click", ".sendButton", function () {
				sendImageClick(false);
			});
			$(document.body).on("click", "#btn-start-game", function () {
				sendObj.ball_samp_time = $('#ball_samp_time').val();
				sendObj.speed_up_fact = $('#spd_up_fact').val();
				sendObj.start_button = true;
				sendObj.stop_button = false;
				sendObj.isDemoMode = 0;
				sendPostGame();
			});
			$(document.body).on("click", "#btn-start-demo", function () {
				sendObj.ball_samp_time = $('#ball_samp_time').val();
				sendObj.speed_up_fact = $('#spd_up_fact').val();
				sendObj.start_button = true;
				sendObj.stop_button = false;
				sendObj.isDemoMode = 1;
				sendPostGame();
			});
			//btn-start is the start engine
			$(document.body).on("click", "#btn-start", function () {
				sendObj.ball_samp_time = $('#ball_samp_time').val();
				sendObj.speed_up_fact = $('#spd_up_fact').val();
				sendObj.start_button = true;
				sendObj.stop_button = false;
				sendPost();
			});
			$(document.body).on("click", "#btn-stop", function () {
				sendObj.ball_samp_time = $('#ball_samp_time').val();
				sendObj.speed_up_fact = $('#spd_up_fact').val();
				sendObj.start_button = false;
				sendObj.stop_button = true;
				sendPost();
			});
			$(document.body).on("click", "#btn-hit-1", function () {
				sendObj.ball_samp_time = $('#ball_samp_time').val();
				sendObj.speed_up_fact = $('#spd_up_fact').val();
				sendObj.start_button = false;
				sendObj.stop_button = false;
				sendObj.hit_01 = 1;
				sendObj.hit_02 = 0;
				sendPostHit();
			});
			$(document.body).on("click", "#btn-hit-2", function () {
				sendObj.ball_samp_time = $('#ball_samp_time').val();
				sendObj.speed_up_fact = $('#spd_up_fact').val();
				sendObj.start_button = false;
				sendObj.stop_button = true;
				sendObj.hit_01 = 0;
				sendObj.hit_02 = 1;
				sendPostHit();
			});
			$(document.body).on("click", "#btn-serve-1", function () {
				sendObj.ball_samp_time = $('#ball_samp_time').val();
				sendObj.speed_up_fact = $('#spd_up_fact').val();
				sendObj.start_button = false;
				sendObj.stop_button = false;
				sendObj.hit_01 = 0;
				sendObj.hit_02 = 0;
				sendObj.place_ball_1 = 1;
				sendObj.place_ball_2 = 0;
				sendPostServe();
			});
			$(document.body).on("click", "#btn-serve-2", function () {
				sendObj.ball_samp_time = $('#ball_samp_time').val();
				sendObj.speed_up_fact = $('#spd_up_fact').val();
				sendObj.start_button = false;
				sendObj.stop_button = false;
				sendObj.hit_01 = 0;
				sendObj.hit_02 = 0;
				sendObj.place_ball_1 = 0;
				sendObj.place_ball_2 = 1;
				sendPostServe();
			});
			$(document.body).on("click", "#btn-addr-1", function () {
				var addrStr = $("#play-1-addr").val()
				sendObj2.ball_samp_time = $('#ball_samp_time').val();
				sendObj2.speed_up_fact = $('#spd_up_fact').val();
				sendObj2.game_id = 1;
				sendObj2.play_num = 1;
				sendObj2.isAddrChange = true;
				sendObj2.addrString = addrStr;
				sendObj2.isGeoChange = false;
				sendPostAddr();
			});
			$(document.body).on("click", "#btn-addr-2", function () {
				var addrStr = $("#play-2-addr").val()
				sendObj2.ball_samp_time = $('#ball_samp_time').val();
				sendObj2.speed_up_fact = $('#spd_up_fact').val();
				sendObj2.game_id = 1;
				sendObj2.play_num = 2;
				sendObj2.isAddrChange = true;
				sendObj2.addrString = addrStr;
				sendObj2.isGeoChange = false;
				sendPostAddr();
			});
			//			window.setTimeout( function() {
			//				window.location.reload(true);
			//			}, 10000 )

		});

	</script>